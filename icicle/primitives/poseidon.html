<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-icicle/primitives/poseidon">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="search" type="application/opensearchdescription+xml" title="Ingonyama Developer Documentation" href="/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous">
<script src="https://plausible.io/js/script.js" data-domain="ingonyama.com" defer="defer"></script><title data-rh="true">Poseidon | Ingonyama Developer Documentation</title><meta data-rh="true" property="og:image" content="https://dev.ingonyama.com//img/logo.png"><meta data-rh="true" property="og:url" content="https://dev.ingonyama.com//icicle/primitives/poseidon"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:site" content="@Ingo_zk"><meta data-rh="true" name="twitter:title" content="Ingonyama Developer Documentation"><meta data-rh="true" name="twitter:description" content="Ingonyama is a next-generation semiconductor company focusing on Zero-Knowledge Proof hardware acceleration..."><meta data-rh="true" name="twitter:image" content="https://dev.ingonyama.com/img/logo.png"><meta data-rh="true" name="og:title" content="Ingonyama Developer Documentation"><meta data-rh="true" name="og:description" content="Ingonyama is a next-generation semiconductor company focusing on Zero-Knowledge Proof hardware acceleration..."><meta data-rh="true" name="og:image" content="https://dev.ingonyama.com/img/logo.png"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Poseidon | Ingonyama Developer Documentation"><meta data-rh="true" name="description" content="Poseidon is a popular hash in the ZK ecosystem primarily because its optimized to work over large prime fields, a common setting for ZK proofs, thereby minimizing the number of multiplicative operations required."><meta data-rh="true" property="og:description" content="Poseidon is a popular hash in the ZK ecosystem primarily because its optimized to work over large prime fields, a common setting for ZK proofs, thereby minimizing the number of multiplicative operations required."><link data-rh="true" rel="icon" href="/img/logo.png"><link data-rh="true" rel="canonical" href="https://dev.ingonyama.com//icicle/primitives/poseidon"><link data-rh="true" rel="alternate" href="https://dev.ingonyama.com//icicle/primitives/poseidon" hreflang="en"><link data-rh="true" rel="alternate" href="https://dev.ingonyama.com//icicle/primitives/poseidon" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://PZY4KJBBBK-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.1abb65f6.css">
<link rel="preload" href="/assets/js/runtime~main.83006974.js" as="script">
<link rel="preload" href="/assets/js/main.5f93433a.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Ingonyama Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.png" alt="Ingonyama Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Ingonyama Developer Documentation</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ingonyama-zk" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://www.ingonyama.com/ingopedia/glossary" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Ingopedia<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><li><a href="https://discord.gg/6vYrE7waPj" target="_blank" rel="noopener noreferrer" class="dropdown__link">Discord<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://x.com/Ingo_zk" target="_blank" rel="noopener noreferrer" class="dropdown__link">Twitter<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://www.youtube.com/@ingo_ZK" target="_blank" rel="noopener noreferrer" class="dropdown__link">YouTube<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://wkf.ms/3LKCbdj" target="_blank" rel="noopener noreferrer" class="dropdown__link">Mailing List<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/icicle/overview">ICICLE</a><button aria-label="Toggle the collapsible sidebar category &#x27;ICICLE&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/icicle/introduction">Getting started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/icicle/core">ICICLE Core</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/icicle/golang-bindings">Golang bindings</a><button aria-label="Toggle the collapsible sidebar category &#x27;Golang bindings&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/icicle/rust-bindings">Rust bindings</a><button aria-label="Toggle the collapsible sidebar category &#x27;Rust bindings&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/icicle/primitives/overview">Primitives</a><button aria-label="Toggle the collapsible sidebar category &#x27;Primitives&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/icicle/primitives/msm">MSM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/icicle/primitives/ntt">NTT</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/icicle/primitives/poseidon">Poseidon Hash</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/icicle/polynomials/overview">Polynomials</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/icicle/multi-gpu">Multi GPU Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/icicle/colab-instructions">Google Colab Instructions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/icicle/integrations">ICICLE Provers</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ZKContainers">ZK Containers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/grants">Ingonyama Grant program</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/contributor-guide">Contributor guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a href="https://www.youtube.com/@ingo_ZK" target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true">Additional Resources</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a href="https://www.youtube.com/@ingo_ZK" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_tcZa" tabindex="0">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a href="https://www.ingonyama.com/blog" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_tcZa" tabindex="0">Ingonyama Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a href="https://www.ingonyama.com/ingopedia" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_tcZa" tabindex="0">Ingopedia<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a href="https://github.com/ingonyama-zk" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_tcZa" tabindex="0">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_FykI"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_DTRl"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/">üè†</a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/icicle/overview"><span itemprop="name">ICICLE</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/icicle/primitives/overview"><span itemprop="name">Primitives</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">Poseidon Hash</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Poseidon</h1><p><a href="https://eprint.iacr.org/2019/458.pdf" target="_blank" rel="noopener noreferrer">Poseidon</a> is a popular hash in the ZK ecosystem primarily because its optimized to work over large prime fields, a common setting for ZK proofs, thereby minimizing the number of multiplicative operations required.</p><p>Poseidon has also been specifically designed to be efficient when implemented within ZK circuits, Poseidon uses far less constraints compared to other hash functions like Keccak or SHA-256 in the context of ZK circuits.</p><p>Poseidon has been used in many popular ZK protocols such as Filecoin and <a href="https://drive.google.com/file/d/1bZZvKMQHaZGA4L9eZhupQLyGINkkFG_b/view?usp=drive_open" target="_blank" rel="noopener noreferrer">Plonk</a>.</p><p>Our implementation of Poseidon is implemented in accordance with the optimized <a href="https://spec.filecoin.io/algorithms/crypto/poseidon/" target="_blank" rel="noopener noreferrer">Filecoin version</a>.</p><p>Let understand how Poseidon works.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="initialization">Initialization<a class="hash-link" href="#initialization" title="Direct link to heading">‚Äã</a></h3><p>Poseidon starts with the initialization of its internal state, which is composed of the input elements and some pregenerated constants. An initial round constant is added to each element of the internal state. Adding The round constants ensure the state is properly mixed from the outset.</p><p>This is done to prevent collisions and to prevent certain cryptographic attacks by ensuring that the internal state is sufficiently mixed and unpredictable.</p><p><img loading="lazy" alt="Alt text" src="/assets/images/image-bff569244d897bcfcd16d979cb29fb9c.png" width="872" height="294" class="img_E7b_"></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="applying-full-and-partial-rounds">Applying full and partial rounds<a class="hash-link" href="#applying-full-and-partial-rounds" title="Direct link to heading">‚Äã</a></h3><p>To generate a secure hash output, the algorithm goes through a series of &quot;full rounds&quot; and &quot;partial rounds&quot; as well as transformations between these sets of rounds.</p><p>First full rounds =&gt; apply SBox and Round constants =&gt; partial rounds =&gt; Last full rounds =&gt; Apply SBox</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="full-rounds">Full rounds<a class="hash-link" href="#full-rounds" title="Direct link to heading">‚Äã</a></h4><p><img loading="lazy" alt="Alt text" src="/assets/images/image-1-5902a94e1680e802186934fdf8ff205e.png" width="864" height="552" class="img_E7b_"></p><p><strong>Uniform Application of S-Box:</strong> In full rounds, the S-box (a non-linear transformation) is applied uniformly to every element of the hash function&#x27;s internal state. This ensures a high degree of mixing and diffusion, contributing to the hash function&#x27;s security. The functions S-box involves raising each element of the state to a certain power denoted by <code>Œ±</code> a member of the finite field defined by the prime <code>p</code>, <code>Œ±</code> can be different depending on the the implementation and user configuration.</p><p><strong>Linear Transformation:</strong> After applying the S-box, a linear transformation is performed on the state. This involves multiplying the state by a MDS (Maximum Distance Separable) Matrix. which further diffuses the transformations applied by the S-box across the entire state.</p><p><strong>Addition of Round Constants:</strong> Each element of the state is then modified by adding a unique round constant. These constants are different for each round and are precomputed as part of the hash function&#x27;s initialization. The addition of round constants ensures that even minor changes to the input produce significant differences in the output.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="partial-rounds">Partial Rounds<a class="hash-link" href="#partial-rounds" title="Direct link to heading">‚Äã</a></h4><p><strong>Selective Application of S-Box:</strong> Partial rounds apply the S-box transformation to only one element of the internal state per round, rather than to all elements. This selective application significantly reduces the computational complexity of the hash function without compromising its security. The choice of which element to apply the S-box to can follow a specific pattern or be fixed, depending on the design of the hash function.</p><p><strong>Linear Transformation and Round Constants:</strong> A linear transformation is performed and round constants are added. The linear transformation in partial rounds can be designed to be less computationally intensive (this is done by using a sparse matrix) than in full rounds, further optimizing the function&#x27;s efficiency.</p><p>The user of Poseidon can often choose how many partial or full rounds he wishes to apply; more full rounds will increase security but degrade performance. The choice and balance is highly dependent on the use case.</p><p><img loading="lazy" alt="Alt text" src="/assets/images/image-2-943ff9b12b39ca32378f75f981ebfb7b.png" width="866" height="560" class="img_E7b_"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="using-poseidon">Using Poseidon<a class="hash-link" href="#using-poseidon" title="Direct link to heading">‚Äã</a></h2><p>ICICLE Poseidon is implemented for GPU and parallelization is performed for each element of the state rather than for each state.
What that means is we calculate multiple hash-sums over multiple pre-images in parallel, rather than going block by block over the input vector.</p><p>So for Poseidon of arity 2 and input of size 1024 * 2, we would expect 1024 elements of output. Which means each block would be of size 2 and that would result in 1024 Poseidon hashes being performed.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="supported-api">Supported API<a class="hash-link" href="#supported-api" title="Direct link to heading">‚Äã</a></h3><p><a href="https://github.com/ingonyama-zk/icicle/tree/main/wrappers/rust/icicle-core/src/poseidon" target="_blank" rel="noopener noreferrer"><code>Rust</code></a>, <a href="https://github.com/ingonyama-zk/icicle/tree/main/icicle/appUtils/poseidon" target="_blank" rel="noopener noreferrer"><code>C++</code></a></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="supported-curves">Supported curves<a class="hash-link" href="#supported-curves" title="Direct link to heading">‚Äã</a></h3><p>Poseidon supports the following curves:</p><p><code>bls12-377</code>, <code>bls12-381</code>, <code>bn-254</code>, <code>bw6-761</code></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="constants">Constants<a class="hash-link" href="#constants" title="Direct link to heading">‚Äã</a></h3><p>Poseidon is extremely customizable and using different constants will produce different hashes, security levels and performance results.</p><p>We support pre-calculated and optimized constants for each of the <a href="#supported-curves">supported curves</a>.The constants can be found <a href="https://github.com/ingonyama-zk/icicle/tree/main/icicle/appUtils/poseidon/constants" target="_blank" rel="noopener noreferrer">here</a> and are labeled clearly per curve <code>&lt;curve_name&gt;_poseidon.h</code>.</p><p>If you wish to generate your own constants you can use our python script which can be found <a href="https://github.com/ingonyama-zk/icicle/blob/b6dded89cdef18348a5d4e2748b71ce4211c63ad/icicle/appUtils/poseidon/constants/generate_parameters.py#L1" target="_blank" rel="noopener noreferrer">here</a>.</p><p>Prerequisites:</p><ul><li>Install python 3</li><li><code>pip install poseidon-hash</code></li><li><code>pip install galois==0.3.7</code></li><li><code>pip install numpy</code></li></ul><p>You will then need to modify the following values before running the script.</p><div class="codeBlockContainer_I0IT language-python theme-code-block"><div class="codeBlockContent_wNvx" style="color:#F8F8F2;background-color:#282A36"><pre tabindex="0" class="prism-code language-python codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># Modify these</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">arity </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">11</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)"># we support arity 2, 4, 8 and 11.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">p </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0x73EDA753299D7D483339D80809A1D80553BDA402FFFE5BFEFFFFFFFF00000001</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)"># bls12-381</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># p = 0x12ab655e9a2ca55660b44d1e5c37b00159aa76fed00000010a11800000000001 # bls12-377</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># p = 0x30644e72e131a029b85045b68181585d2833e84879b9709143e1f593f0000001 # bn254</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># p = 0x1ae3a4617c510eac63b05c06ca1493b1a22d9f300f5138f1ef3622fba094800170b5d44300000008508c00000000001 # bw6-761</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">prime_bit_len </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">255</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">field_bytes </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># primitive_element = None</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">primitive_element </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">7</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)"># bls12-381</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># primitive_element = 22 # bls12-377</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># primitive_element = 5 # bn254</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># primitive_element = 15 # bw6-761</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>We only support <code>alpha = 5</code> so if you want to use another alpha for SBox please reach out on discord or open a github issue.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="rust-api">Rust API<a class="hash-link" href="#rust-api" title="Direct link to heading">‚Äã</a></h3><p>This is the most basic way to use the Poseidon API.</p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx" style="color:#F8F8F2;background-color:#282A36"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">let test_size = 1 &lt;&lt; 10;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">let arity = 2u32;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">let ctx = get_default_device_context();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">let constants = load_optimized_poseidon_constants::&lt;F&gt;(arity, &amp;ctx).unwrap();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">let config = PoseidonConfig::default();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">let inputs = vec![F::one(); test_size * arity as usize];</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">let outputs = vec![F::zero(); test_size];</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">let mut input_slice = HostOrDeviceSlice::on_host(inputs);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">let mut output_slice = HostOrDeviceSlice::on_host(outputs);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">poseidon_hash_many::&lt;F&gt;(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &amp;mut input_slice,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &amp;mut output_slice,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    test_size as u32,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    arity as u32,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &amp;constants,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &amp;config,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">.unwrap();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>The <code>PoseidonConfig::default()</code> can be modified, by default the inputs and outputs are set to be on <code>Host</code> for example.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#F8F8F2;background-color:#282A36"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">impl&lt;&#x27;a&gt; Default for PoseidonConfig&lt;&#x27;a&gt; {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    fn default() -&gt; Self {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        let ctx = get_default_device_context();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Self {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            ctx,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            are_inputs_on_device: false,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            are_outputs_on_device: false,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            input_is_a_state: false,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            aligned: false,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            loop_state: false,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            is_async: false,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>In the example above <code>load_optimized_poseidon_constants::&lt;F&gt;(arity, &amp;ctx).unwrap();</code> is used which will load the correct constants based on arity and curve. Its possible to <a href="#constants">generate</a> your own constants and load them.</p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx" style="color:#F8F8F2;background-color:#282A36"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">let ctx = get_default_device_context();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    let cargo_manifest_dir = env!(&quot;CARGO_MANIFEST_DIR&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    let constants_file = PathBuf::from(cargo_manifest_dir)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .join(&quot;tests&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .join(format!(&quot;{}_constants.bin&quot;, field_prefix));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    let mut constants_buf = vec![];</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    File::open(constants_file)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .unwrap()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .read_to_end(&amp;mut constants_buf)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .unwrap();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    let mut custom_constants = vec![];</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    for chunk in constants_buf.chunks(field_bytes) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        custom_constants.push(F::from_bytes_le(chunk));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    let custom_constants = create_optimized_poseidon_constants::&lt;F&gt;(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        arity as u32,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &amp;ctx,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        full_rounds_half,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        partial_rounds,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &amp;mut custom_constants,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    .unwrap();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>For more examples using different configurations refer here.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="the-tree-builder">The Tree Builder<a class="hash-link" href="#the-tree-builder" title="Direct link to heading">‚Äã</a></h2><p>The tree builder allows you to build Merkle trees using Poseidon. </p><p>You can define both the tree&#x27;s <code>height</code> and its <code>arity</code>. The tree <code>height</code> determines the number of layers in the tree, including the root and the leaf layer. The <code>arity</code> determines how many children each internal node can have.</p><div class="codeBlockContainer_I0IT language-rust theme-code-block"><div class="codeBlockContent_wNvx" style="color:#F8F8F2;background-color:#282A36"><pre tabindex="0" class="prism-code language-rust codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">let height = 20;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">let arity = 2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">let leaves = vec![F::one(); 1 &lt;&lt; (height - 1)];</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">let mut digests = vec![F::zero(); merkle_tree_digests_len(height, arity)];</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">let mut leaves_slice = HostOrDeviceSlice::on_host(leaves);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">let ctx = get_default_device_context();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">let constants = load_optimized_poseidon_constants::&lt;F&gt;(arity, &amp;ctx).unwrap()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">let mut config = TreeBuilderConfig::default();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">config.keep_rows = 1;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">build_poseidon_merkle_tree::&lt;F&gt;(&amp;mut leaves_slice, &amp;mut digests, height, arity, &amp;constants, &amp;config).unwrap();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">println!(&quot;Root: {:?}&quot;, digests[0..1][0]);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Similar to Poseidon, you can also configure the Tree Builder <code>TreeBuilderConfig::default()</code></p><ul><li><code>keep_rows</code>: The number of rows which will be written to output, 0 will write all rows.</li><li><code>are_inputs_on_device</code>: Have the inputs been loaded to device memory ?</li><li><code>is_async</code>: Should the TreeBuilder run asynchronously? <code>False</code> will block the current CPU thread. <code>True</code> will require you call <code>cudaStreamSynchronize</code> or <code>cudaDeviceSynchronize</code> to retrieve the result.</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="benchmarks">Benchmarks<a class="hash-link" href="#benchmarks" title="Direct link to heading">‚Äã</a></h3><p>We ran the Poseidon tree builder on: </p><p><strong>CPU</strong>: 12th Gen Intel(R) Core(TM) i9-12900K/</p><p><strong>GPU</strong>: RTX 3090 Ti</p><p><strong>Tree height</strong>: 30 (2^29 elements)</p><p>The benchmarks include copying data from and to the device.</p><table><thead><tr><th>Rows to keep parameter</th><th>Run time, Icicle</th><th>Supranational PC2</th></tr></thead><tbody><tr><td>10</td><td>9.4 seconds</td><td>13.6 seconds</td></tr><tr><td>20</td><td>9.5 seconds</td><td>13.6 seconds</td></tr><tr><td>29</td><td>13.7 seconds</td><td>13.6 seconds</td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/ingonyama-zk/icicle/tree/main/docs/icicle/primitives/poseidon.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-04-23T02:26:40.000Z">4/23/2024</time></b> by <b>ChickenLover</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/icicle/primitives/ntt"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">NTT - Number Theoretic Transform</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/icicle/polynomials/overview"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Polynomial API Overview</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#initialization" class="table-of-contents__link toc-highlight">Initialization</a></li><li><a href="#applying-full-and-partial-rounds" class="table-of-contents__link toc-highlight">Applying full and partial rounds</a></li><li><a href="#using-poseidon" class="table-of-contents__link toc-highlight">Using Poseidon</a><ul><li><a href="#supported-api" class="table-of-contents__link toc-highlight">Supported API</a></li><li><a href="#supported-curves" class="table-of-contents__link toc-highlight">Supported curves</a></li><li><a href="#constants" class="table-of-contents__link toc-highlight">Constants</a></li><li><a href="#rust-api" class="table-of-contents__link toc-highlight">Rust API</a></li></ul></li><li><a href="#the-tree-builder" class="table-of-contents__link toc-highlight">The Tree Builder</a><ul><li><a href="#benchmarks" class="table-of-contents__link toc-highlight">Benchmarks</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2024 Ingonyama, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.83006974.js"></script>
<script src="/assets/js/main.5f93433a.js"></script>
</body>
</html>